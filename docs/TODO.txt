* merge ranges across (consecutive) calls
    Service:
        unmap ranges for each chunk
            update ranges: merge ranges
            check ranges: (ranges + requests) is whole chunk?
            invalidate all ranges
        (when to invalidate ranges for ALL chunks?)

    Worker:
        On successful partial unmap:
            for each chunk:
                update ranges
                check ranges?

    Dispatcher:
        Unmap:
            calc chunk range
            check unmap ranges
                if whole chunk:
                    invalidate
                    request unmap whole chunk

        Write:
            calc chunk range
            for each chunk:
                invalidate unmap ranges

    Last idle worker?
        last request time in service and each worker
            set same timestamp
        if my last request time == last request time

* sparse chunk?

* differential (take snapshots and merge later) disk
    - parent disk path at first line (maybe nested)
    - smaller chunk size: chunk###-###
    - copy chunk at write
