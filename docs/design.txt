C++, WinSpd

Disk metadata file: name.chunkdisk
    disk_size
    chunk_size
    num_of_chunks path/to/dir/prefix...

Create chunk:
    directory (part): choose from top to bottom
    file name: chunk###
    file size: 0 or chunk_size; empty or full, no deletion
    sparse chunk?
        set chunk size small
        do TRIM

Read: ReadFile
    chunk not found or empty: zero-fill buffer

Write: WriteFile

Unmap (a.k.a. TRIM):
    unmap range >= chunk: Truncate (Set size to 0)
    unmap range <  chunk: FSCTL_SET_ZERO_DATA

Asynchronous I/O:
    FILE_FLAG_NO_BUFFERING && FILE_FLAG_WRITE_THROUGH for best asynchronous performance
    See asyncio.txt

    Alignment requirements with FILE_FLAG_NO_BUFFERING:
        always align to 4096 bytes (pages)
        convert unaligned block I/O to page I/O:
            write through
            flush when aligned
            performance?
                Windows caches virtual disk
                Cluster size is 4096 bytes by default

    Close file handles if idle to trigger metadata updates
